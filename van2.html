<html>
<head>
<style>
table, th, td {
  border: 1px solid black;
}
td:hover {
  background-color: lightgreen;
  color: #000000;
}
</style>
<script>


var sentences= 
[

['van.mp3', 
   [
[24,29],
[29,33],
[33,37],
[37,41],
[41,45],
[45,49],
[49,53],
[53,57],
[57,61],
[61,64],
[67,70],
[70,75],
[75,79],
[79,83],
[83,87],
[87,91],
[91,95],
[95,99],
[99,103],
[103,107],
[109,113],
[113,117],
[117,120],
[120,123],
[123,127],
[127,131],
[131,134],
[134,138],
[138,141],
[141,146],
[151,155],
[155,159],
[159,163],
[163,166],
[166,170],
[170,173],
[173,177],
[177,180],
[180,184],
[184,187],
[187,192],
[192,196],
[196,200],
[200,204],
[204,208],
[208,212],
[212,216],
[216,220],
[220,223],
[223,228],
[230,233],
[233,236],
[236,240],
[240,244],
[244,247],
[247,251],
[251,254],
[254,258],
[258,262],
[262,265],
[267,271],
[271,275],
[275,278],
[278,282],
[282,285],
[285,289],
[289,292],
[292,296],
[296,300],
[300,304],
[307,310],
[310,313],
[313,317],
[317,320],
[320,323],
[323,326],
[326,330],
[330,333],
[333,337],
[337,341],
[341,345],
[345,349],
[349,354],
[354,358],
[358,362],
[362,367],
[367,372],
[372,376],
[376,380],
[380,384],
[391,396],
[396,399],
[399,402],
[402,406],
[406,410],
[410,414],
[414,417],
[417,421],
[421,425],
[425,429],
[429,432],
[432,436],
[436,440],
[440,444],
[444,448],
[448,451],
[451,454],
[454,456],
[456,459],
[459,462],
[465,469],
[469,474],
[474,478],
[478,482],
[482,486],
[486,491],
[491,495],
[495,499],
[499,503],
[503,507],
[507,511],
[511,516],
[516,520],
[520,524],
[524,528],
[528,532],
[532,536]
], 'Tong Hop Van',

   [
'ia',
'ua',

'ưa',

'ao',

'eo',

'au',

'êu',

'âu',

'iu',

'ưu',

'ai',

'oi',

'ôi',

'ơi',

'ui',

'ưi',

'ay',

'ây',

'ac',

'âc',

'ăc',

'oc',

'ôc',

'uc',

'ưc',

'at',

'ăt',

'ât',

'et',

'êt',

'it',

'ot',

'ôt',

'ơt',

'ut',

'ưt',

'an',

'ăn',

'ân',

'en',

'ên',

'in',

'on',

'ôn',

'ơn',

'un',

'ang',

'ăng',

'âng',

'ong',

'ông',

'ung',

'ưng',

'ach',

'êch',

'ich',

'am',

'ăm',

'âm',

'em',

'êm',

'om',

'ôm',

'ơm',

'im',

'um',

'ap',

'ăp',

'âp',

'ep',

'êp',

'op',

'ôp',

'ơp',

'ip',

'up',

'anh',

'ênh',

'inh',

'ươu',

'iêu',

'yêu',

'uôi',

'ươi',

'iêc',

'uôc',

'ươc',

'iêt',

'yêt',

'uôt',

'ươt',

'iên',

'yên',

'uôn',

'ươn',

'iêng',

'yêng',

'uông',

'ương',

'iêm',

'yêm',

'uôm',

'ươm',

'iêp',

'ươp',

'oa',

'oe',

'uê',

'uy',

'oai',

'oay',

'oac',

'oat',

'oan',

'oang',

'uân',

'uyên',

'uyt',

'oăt',

'uât',

'uyêt',

'oanh',

'uynh',

'uych',

'oăng',

'oam',

'oap'
],10


 ],
['van.mp3', 
   [
      [91,95],
[33,37],
[91,95],
[33,37],
[890,891],
[159,163],
[196,200],
[890,891],
[24,29],
[230,233],
[187,192],
[159,163],
[95,99],
[75,79],
[890,891],

[75,79],
[91,95],
[890,891],
[49,53],
[223,228],
[258,262],
[131,134],
[890,891],
[134,138],
[890,891],
[890,891],
[173,177],
[127,131],
[236,240],
[341,345],
[91,95],
[890,891],
[233,236],
[326,330],
[333,337]

   ], 'Con cú khôn ngoan',
    [
       'Ngày',
'xửa',
'ngày',
'xưa,',
'có',
'một',
'con',
'cú',
'già',
'sống',
'trên',
'một',
'cây',
'sồi',
'to.',


'Mỗi',
'ngày,',
'nó',
'đều',
'phóng',
'tầm',
'mắt',
'ra',
'thật',
'xa',
'để',
'quan',
'sát',
'những',
'điều',
'xảy',
'ra',
'xung',
'quanh',
'mình.'

     ],8

 ],

['van.mp3', 
   [
[79,83],
[37,41],
[890,891],
[367,372],

[890,891],
[187,192],
[79,83],
[37,41],

[79,83],
[37,41],
[890,891],
[367,372],

[79,83],
[37,41],
[180,184],
[367,372],

[216,220],
[890,891],
[99,103],
[890,891],

[79,83],
[37,41],
[141,146],
[173,177],

[196,200],
[421,425],
[163,166],
[890,891],

[79,83],
[37,41],
[890,891],
[448,451],

[890,891],
[890,891],
[223,228],
[159,163],

[890,891],
[204,208],
[890,891],
[127,131],

[349,354],
[212,216],
[53,57],
[91,95],

[890,891],
[159,163],
[173,177],
[91,95],

[180,184],
[326,330],
[79,83],
[890,891],

[67,70],
[67,70],
[233,236],
[890,891],

[216,220],
[216,220],
[890,891],
[37,41],

[173,177],
[79,83],
[890,891],
[53,57],

[890,891],
[212,216],
[890,891],
[890,891],

[491,495],
[482,486],
[204,208]
   ], 'Bài thơ',
    [
     'Lời',
'chào',
'đi',
'trước',

'Đi',
'đến',
'nơi',
'nào',

'Lời',
'chào',
'đi',
'trước',

'Lời',
'chào',
'dẫn',
'bước',

'Chẳng',
'sợ',
'lạc',
'nhà',

'Lời',
'chào',
'kết',
'bạn',

'Con',
'đường',
'bớt',
'xa',

'Lời',
'chào',
'là',
'hoa',

'Nở',
'từ',
'lòng',
'tốt',

'Là',
'cơn',
'gió',
'mát',

'Buổi',
'sáng',
'đầu',
'ngày',

'Như',
'một',
'bàn',
'tay',

'Chân',
'thành',
'cởi',
'mở',

'Ai',
'ai',
'cũng',
'có',

'Chẳng',
'nặng',
'là',
'bao',

'Bạn',
'ơi,',
'đi',
'đâu',

'Nhớ',
'mang',
'đi',
'nhé!',

'Nguyễn',
'Hoàng',
'Sơn'
     ],4
 ],
['van.mp3', 
   [
      [91,95],
[33,37],
[890,891],
[67,70],
[890,891],
[230,233],
[41,45],
[230,233],
[134,138],
[396,399],
[326,330],
[159,163],
[233,236],
[254,258],
[890,891],
[236,240],
[67,70],
[67,70],
[230,233],
[890,891],
[196,200],
[159,163],
[275,278],
[354,358],
[890,891],
[890,891],
[230,233],
[192,196],
[95,99],
[159,163],
[67,70],
[890,891],
[33,37],
[95,99],
[367,372],
[890,891],
[236,240],
[187,192],
[417,421],
[45,49],
[890,891],
[890,891],
[396,399],
[890,891],
[67,70],
[890,891],
[333,337],
[890,891],
[159,163],
[33,37],
[890,891],
[230,233],
[91,95],
[230,233],
[180,184],
[196,200],
[890,891],
[890,891],
[33,37],

[45,49],
[890,891],
[204,208],
[187,192],
[890,891],
[33,37],
[177,180],
[890,891],
[890,891],
[890,891],
[230,233],
[67,70],
[890,891],
[196,200],
[67,70],
[204,208],
[29,33],
[890,891],
[230,233],
[402,406],
[131,134],
[83,87],
[890,891],
[33,37],
[456,459],
[890,891],
[890,891],
[196,200],
[67,70],
[166,170],
[402,406],
[75,79],
[67,70],
[159,163],
[79,83],
[53,57],
[890,891],
[262,265],
[223,228],
[345,349],
[890,891],
[33,37],
[890,891],
[33,37],
[890,891],
[890,891],
[187,192],
[70,75],
[890,891],
[890,891],
[354,358],
[367,372],
[890,891],
[166,170],
[396,399],
[491,495],
[333,337],
[890,891],
[53,57],
[326,330],
[396,399],
[486,491],
[890,891]     

   ], 'Truyện Cổ Tích Sọ Dừa',
    [
       'Ngày',
'xưa',
'có',
'hai',
'vợ',
'chồng',
'nghèo',
'sống',
'rất',
'hiền',
'lành,',
'tốt',
'bụng,',
'chăm',
'chỉ',
'nhưng',
'lại',
'mãi',
'không',
'có',
'con.',
'Một',
'hôm',
'người',
'vợ',
'ra',
'đồng',
'nhìn',
'thấy',
'một',
'cái',
'sọ',
'dừa',
'đầy',
'nước',
'thì',
'bưng',
'lên',
'uống,',
'sau',
'đó',
'thì',
'liền',
'có',
'thai',
'và',
'sinh',
'ra',
'một',
'đứa',
'trẻ',
'không',
'tay',
'không',
'chân',
'tròn',
'như',
'quả',
'dừa.',

 
'Sau',
'khi',
'lớn',
'lên',
'Sọ',
'Dừa',
'chăn',
'bò',
'cho',
'phú',
'ông,',
'hai',
'cô',
'con',
'gái',
'lớn',
'của',
'phú',
'ông',
'luôn',
'hắt',
'hủi',
'Sọ',
'Dừa,',
'duy',
'chỉ',
'cô',
'con',
'gái',
'út',
'luôn',
'đối',
'đãi',
'tốt',
'với',
'cậu',
'và',
'đem',
'lòng',
'yêu',
'Sọ',
'Dừa.',
'Sọ',
'Dừa',
'nhờ',
'mẹ',
'đến',
'hỏi',
'vợ',
'và',
'cưới',
'được',
'cô',
'út,',
'hiện',
'nguyên',
'hình',
'là',
'cậu',
'thanh',
'niên',
'tuấn',
'tú.'
     

      
     ],8
 ],
['van.mp3', 
   [
      [24,29],
[24,29],
[24,29],
[24,29],
[24,29],
[24,29],
[24,29],
[24,29],
[29,33],
[29,33],
[29,33],
[29,33],
[29,33],
[29,33],
[29,33],
[29,33],
[33,37],
[33,37],
[33,37],
[33,37],
[33,37],
[33,37],
[33,37],
[33,37],
[37,41],
[37,41],
[37,41],
[37,41],
[37,41],
[37,41],
[37,41],
[37,41],
[41,45],
[41,45],
[41,45],
[41,45],
[41,45],
[41,45],
[41,45],
[41,45],
[45,49],
[45,49],
[45,49],
[45,49],
[45,49],
[45,49],
[45,49],
[45,49],
[49,53],
[49,53],
[49,53],
[49,53],
[49,53],
[49,53],
[49,53],
[49,53],
[53,57],
[53,57],
[53,57],
[53,57],
[53,57],
[53,57],
[53,57],
[53,57],
[57,61],
[57,61],
[57,61],
[57,61],
[57,61],
[57,61],
[57,61],
[57,61],
[61,64],
[61,64],
[61,64],
[61,64],
[61,64],
[61,64],
[61,64],
[61,64]
   ], 'Vần Phổ Biến 1',
    [
       'bịa',
'chĩa',
'dĩa',
'địa',
'kìa',
'khía',
'phía',
'tía',
'bùa',
'của',
'chúa',
'giụa',
'hùa',
'khua',
'múa',
'túa',
'bựa',
'cửa',
'chứa',
'dừa',
'đứa',
'giữa',
'hứa',
'mưa',
'áo',
'bão',
'cạo',
'cháo',
'đào',
'gạo',
'giáo',
'ngạo',
'bẹo',
'chéo',
'dẻo',
'đẽo',
'giẹo',
'kéo',
'khéo',
'léo',
'bảu',
'cảu',
'cháu',
'đáu',
'giảu',
'háu',
'láu',
'máu',
'bệu',
'đểu',
'kêu',
'nếu',
'nghêu',
'sếu',
'tếu',
'thêu',
'ẩu',
'bầu',
'cầu',
'chấu',
'dẫu',
'gấu',
'giấu',
'hậu',
'bĩu',
'chịu',
'địu',
'hiu',
'líu',
'míu',
'tịu',
'thiu',
'bưu',
'cựu',
'hữu',
'mưu',
'sửu',
'tựu',
'ngưu',
'lựu'

     ],8
 ]


];

let video_index = 0;
let time_index = 0;
let repeat = 0;

let pauseOrNot=false;

let repeatTimes = 5;
var video;

//var video=document.getElementById("myVideo");


var maxTime;

document.addEventListener('DOMContentLoaded', () => {
  video = document.getElementById("myVideo");
  video.defaultPlaybackRate = 0.75;

  video.addEventListener("timeupdate", function(){
    if(video.currentTime >= maxTime){
       myLoop();
       //var popupwin = window.open('http://www.google.com','anyname','width=10,height=1,left=5,top=3');
       //popupwin.close();
    }
  }, false);
});

function playVideo(myUrl, startTime, endTime) { 
  highlightWord(time_index);
  document.getElementById("demo").innerHTML +=myUrl + " start:"+startTime+" end: "+endTime+" time_index" +time_index+ "<br>";
  document.getElementById("bodydesc").scrollTop = document.getElementById("bodydesc").scrollHeight;
  //video.defaultPlaybackRate = 0.75;
  //video.src = 'video/'+myUrl;
  video.src = myUrl;
  video.currentTime=startTime;
  video.play();
  maxTime = endTime;
} 
function pauseVideo(){
  video.pause();
}

function unpauseVideo(){
  video.play();
}

function readWord(wordId){
  time_index=wordId-1;
  highlightWord(time_index);
  myLoop();
}

function arr2tbl(ncols, words){
 return words.reduce((a,c,i)=>{
 if(i%ncols==0)a.push([]);
   a.at(-1).push([c,i+1]);
   return a;
  },[]).map(r=>"<tr>"+r.map(c=>`<td id="${c[1]}" onclick=readWord("${c[1]}") >${c[0]}</td>`).join("")+"</tr>").join("\n");
}

function showWords(myVid_index){
  var table = document.getElementById('wordTable');
  // Clear the existing table content
  table.innerHTML = '';
  var words=sentences[myVid_index][3];
  var noOfWordsPerRow=sentences[myVid_index][4];
  table.innerHTML= arr2tbl(noOfWordsPerRow, words);

}

function  highlightWord(myTime_index){
  //get all <td> elements within the table with id 'wordTable'
  var tdElements = document.querySelectorAll('#wordTable td');

  //loop through each <td> element and remove its inline style
  tdElements.forEach(function(td) {
    td.style = '';
  });

  //document.getElementById("wordNo").innerHTML ="<b>"+myTime_index+"</b>";
  document.getElementById(myTime_index+1).style.color ="red";
  document.getElementById(myTime_index+1).style.fontWeight ="bold";
  document.getElementById(myTime_index+1).style.backgroundColor="lightblue";
}

function playAllVideos(){
  let text = "Do you want to play this video?";
  if (confirm(text) == true) {
    video_index = 0;
    time_index = 0;
    repeat = 0;
    myLoop();
  }
}

function updateRepeatTimes(repeatTimes_index){
  repeatTimes =repeatTimes_index;
  repeat=0; 
  myLoop();
}

function myLoop(){
  if (!sentences[video_index]) {
    //video.src = null;
    //return;  
    video_index = 0;
    time_index = 0;
    repeat = 0;

  }

  playVideo(sentences[video_index][0], sentences[video_index][1][time_index][0], sentences[video_index][1][time_index][1]);


  if (repeat==0){
     if (pauseOrNot==true){
        video.pause();
     }
  }   
  repeat++;
  
  

  if (repeat >= repeatTimes) {
    repeat = 0;
    time_index++;
    if (time_index >= sentences[video_index][1].length) {
      time_index = 0;
      //video_index++;    
    }
    
  }

}

function moveBackwardTimeindex(){
  if (time_index>0){
     time_index--;
     repeat=0;
     myLoop();
  }
  else{
     time_index=0;
  }
}

function moveForwardTimeindex(){
   if (time_index<sentences[video_index][1].length){
      time_index++; 
      repeat=0; 
      myLoop();
   }
}

function jumpToVideo(vid_index){
//    alert (vid_index);
    
  let text = "Do you want to play this video?";
  if (confirm(text) == true) {
    video_index = vid_index;
    time_index = 0;
    repeat = 0;
    showWords(vid_index);
    myLoop();
  } 

    
}

function listVideos(){
  var vid_index=0;
  for (const sentence of sentences) {
     
     const [video, timers,videoName] = sentence
     var videoLink="<a href='#' onclick='jumpToVideo("+vid_index+")' >" + videoName + "</a><br><br>";
     //alert (videoLink);
     document.getElementById("allVideos").innerHTML +=videoLink;
     vid_index++;
  }
  document.getElementById("allVideos").style.fontSize = "x-large";
  hideVideo();
}


function hideVideo() {
  document.getElementById("myVideo").style.visibility = "hidden";
}
function unhideVideo() {
  let passW = prompt("Please enter password", "");
  if (passW == "123456") {
     document.getElementById("myVideo").style.visibility = "visible";
  }
  
}

</script>
</head>
<body onload="listVideos()">

<table id="wordTable" style="font-size:30px">
</table>
<br>

<table>
<tr>
<td>
<a href="#" onclick="pauseVideo()" style="font-size: 35px; text-decoration: none" > Pause Video</a>
</td>
<td>
<a href="#" onclick="unpauseVideo()" style="font-size: 35px; text-decoration: none" > Unpause Video</a>
</td>
</tr>
</table>
<br>

<table border=2>
<tr>
<td>
<a href="#" onclick="playAllVideos()" style="font-size: 20px; text-decoration: none" > Play All Videos</a>
</td>
<td>
<a href="#" onclick="pauseOrNot=true" style="font-size: 20px; text-decoration: none" > Pause = True </a>
</td>
<td>
<a href="#" onclick="pauseOrNot=false" style="font-size: 20px; text-decoration: none" > Pause = false </a>
</td>
<td>
<a href="#" onclick="moveForwardTimeindex()" style="font-size: 20px; text-decoration: none" > Move Forward Time Index </a>
</td>
<td>
<a href="#" onclick="moveBackwardTimeindex()" style="font-size: 20px; text-decoration: none" > Move Backward Time Index </a>
</td>


</tr>
<tr>
<td>
<a href="#" onclick="updateRepeatTimes(1)" style="font-size: 20px; text-decoration: none" > Repeat Once </a>
</td>

<td>
<a href="#" onclick="updateRepeatTimes(2)" style="font-size: 20px; text-decoration: none" > Repeat Twice </a>
</td>

<td>
<a href="#" onclick="updateRepeatTimes(3)" style="font-size: 20px; text-decoration: none" > Repeat 3 Times </a>
</td>

<td>
<a href="#" onclick="updateRepeatTimes(4)" style="font-size: 20px; text-decoration: none" > Repeat 4 Times </a>
</td>


<td>
<a href="#" onclick="updateRepeatTimes(5)" style="font-size: 20px; text-decoration: none" > Repeat 5 Times </a>
</td>

</tr>
</table>
<br>


<p id="allVideos"></p>

<br><br>

<a href="#" onclick="hideVideo()" style="font-size: 30px; text-decoration: none" >Hide</a>
<a href="#" onclick="unhideVideo()" style="font-size: 30px; text-decoration: none" >Unhide</a>
<br>
<table>
<tr>
<td>
<video id="myVideo" width="200" height="200" controls autoplay loop>

  Your browser does not support the video tag.
</video>

</td>
<td>

<div id="bodydesc" style="margin-left:auto; margin-right:auto; width:560px; height: 400px; overflow-y: scroll;">

    <p id="demo">

     

    </p>

</div>

</td>
  
</tr>
</table>
</body>
</html>
