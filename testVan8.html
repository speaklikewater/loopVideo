<html>
<head>

<script>
var sentences= 
[



['van.mp3', 
   [
[524,528],
[528,532],
[532,536],
[540,545]
], 'Van'
 ],

['thelittlemermaid2.mp4', 
   [
[6,304]
], 'The Little Mermaid 2: The Youngest Sea Princess'
 ],

['thelittlemermaid3.mp4', 
   [
[6,267]
], 'The Little Mermaid 3: Tail from the Upper World'
 ],

['thelittlemermaid4.mp4', 
   [
[6,300]
], 'The Little Mermaid 4: The Little Mermaid Surfaces'
 ],

['thelittlemermaid5.mp4', 
   [
[6,279]
], 'The Little Mermaid 5: The Storm'
 ],

['thelittlemermaid6.mp4', 
   [
[6,276]
], 'The Little Mermaid 6: Daybreak'
 ],


['thelittlemermaid7.mp4', 
   [
[6,266]
], 'The Little Mermaid 7: Watching from afar'
 ],


['thelittlemermaid8.mp4', 
   [
[6,291]
], 'The Little Mermaid 8: Dreaming of the Upper World'
 ],


['thelittlemermaid9.mp4', 
   [
[6,287]
], 'The Little Mermaid 9: The Journey to Gooba'
 ],

['thelittlemermaid10.mp4', 
   [
[6,298]
], 'The Little Mermaid 10: The Sea Witch'
 ],

['thelittlemermaid11.mp4', 
   [
[6,273]
], 'The Little Mermaid 11: Inside the Prince Palace'
 ],

['thelittlemermaid12.mp4', 
   [
[6,267]
], 'The Little Mermaid 12: The Mermaid and the Prince'
 ],

['thelittlemermaid13.mp4', 
   [
[6,268]
], 'The Little Mermaid 13: The Voyage'
 ],

['thelittlemermaid14.mp4', 
   [
[6,263]
], 'The Little Mermaid 14: A Royal Wedding'
 ],

['thelittlemermaid15.mp4', 
   [
[6,271]
], 'The Little Mermaid 15: A Last Chance'
 ],

['thelittlemermaid16.mp4', 
   [
[6,260]
], 'The Little Mermaid 16: In the World of Air Spirits'
 ],


['spacepatrol2.mp4', 
   [
[6,161]
], 'Space Patrol: Episode 2 - A Big Mistake'
 ],


['spacepatrol3.mp4', 
   [
[6,163]
], 'Space Patrol: Episode 3 - Rusty Robot'
 ],

['spacepatrol4.mp4', 
   [
[6,220]
], 'Space Patrol: Episode 4 - Fixing Bot'
 ],

['spacepatrol5.mp4', 
   [
[6,210]
], 'Space Patrol: Episode 5 - Surprise Landing'
 ],

['spacepatrol6.mp4', 
   [
[6,187]
], 'Space Patrol: Episode 6 - Mission Over'
 ],

['monsteracademy2.mp4', 
   [
[5,462]
], 'Monster Academy: Chapper 2 - Mrs Hag'
 ],

['monsteracademy3.mp4', 
   [
[6,403]
], 'Monster Academy: Chapper 3 - One Mean Monster'
 ],

['monsteracademy4.mp4', 
   [
[5,452]
], 'Monster Academy: Chapper 4 - Waldo\'s Weird Spells'
 ],

['monsteracademy5.mp4', 
   [
[6,391]
], 'Monster Academy: Chapper 5 - A Ghostly Night'
 ],

['monsteracademy6.mp4', 
   [
[5,367]
], 'Monster Academy: Chapper 6 - Over the Fence'
 ],


['monsteracademy7.mp4', 
   [
[5,397]
], 'Monster Academy: Chapper 7 - Big Trouble'
 ],

['monsteracademy8.mp4', 
   [
[5,382]
], 'Monster Academy: Chapper 8 - Mayor Hubbletree'
 ],

['monsteracademy9.mp4', 
   [
[6,421]
], 'Monster Academy: Chapper 9 - Back to People Place'
 ],

['monsteracademy10.mp4', 
   [
[5,422]
], 'Monster Academy: Chapper 10 - The Mistery is Solved'
 ],


['wildcatandtheprincessmouse.mp4', 
   [
 [0,253]
], 'Wild Cat and the Princess Mouse'
 ],

['aliserapunzel4.mp4', 
   [
[5,558]
], 'Alisebaba Rapunzel: Episode 4 - Princess Squad'
 ],

['aliserapunzel5.mp4', 
   [
[5,568]
], 'Alisebaba Rapunzel: Episode 5 - Princesses vs Witches'
 ],

['aliserapunzel6.mp4', 
   [
[5,596]
], 'Alisebaba Rapunzel: Episode 6 - Disappearing Colors'
 ],

['aliserapunzel7.mp4', 
   [
[5,652]
], 'Alisebaba Rapunzel: Episode 7 - Saving Silly Dwarf'
 ],

['aliserapunzel8.mp4', 
   [
[5,726]
], 'Alisebaba Rapunzel: Episode 8 - Snow White\'s Birthday Party'
 ],

['aliserapunzel10.mp4', 
   [
[5,533]
], 'Alisebaba Rapunzel: Episode 10 - Three Great Favors'
 ],

['aliserapunzel11.mp4', 
   [
[5,520]
], 'Alisebaba Rapunzel: Episode 11 - The Giant Surprise Egg'
 ],



['thumbelina4-2.mp4', 
   [

], 'Thumbelina 4-2: Escape from the Swamp'
 ],

 ['thumbelina5-1.mp4', 
   [

[1,128]
], 'Thumbelina 5-1: Up and Away'
 ],

['thumbelina5-2.mp4', 
   [
[1,213]
], 'Thumbelina 5-2: Up and Away'
 ]
];

let video_index = 0;
let time_index = 0;
let repeat = 0;

let pauseOrNot=false;

let repeatTimes = 2;
var video;

//var video=document.getElementById("myVideo");


var maxTime;

document.addEventListener('DOMContentLoaded', () => {
  video = document.getElementById("myVideo");
  video.defaultPlaybackRate = 0.75;

  video.addEventListener("timeupdate", function(){
    if(video.currentTime >= maxTime){
       myLoop();
       var popupwin = window.open('http://www.google.com','anyname','width=10,height=1,left=5,top=3');
       popupwin.close();
    }
  }, false);
});

function playVideo(myUrl, startTime, endTime) { 
  document.getElementById("demo").innerHTML +=myUrl + " start:"+startTime+" end: "+endTime+"<br>";
  document.getElementById("bodydesc").scrollTop = document.getElementById("bodydesc").scrollHeight;
  //video.defaultPlaybackRate = 0.75;
  video.src = 'video/'+myUrl;
  //video.src = myUrl;
  video.currentTime=startTime;
  video.play();
  maxTime = endTime;
} 

function playAllVideos(){
  let text = "Do you want to play this video?";
  if (confirm(text) == true) {
    video_index = 0;
    time_index = 0;
    repeat = 0;
    myLoop();
  }
}

function updateRepeatTimes(repeatTimes_index){
  repeatTimes =repeatTimes_index;
  repeat=0; 
  myLoop();
}

function myLoop(){
  if (!sentences[video_index]) {
    //video.src = null;
    //return;  
    video_index = 0;
    time_index = 0;
    repeat = 0;

  }

  playVideo(sentences[video_index][0], sentences[video_index][1][time_index][0], sentences[video_index][1][time_index][1]);
  
  if (repeat==0){
     if (pauseOrNot==true){
        video.pause();
     }
  }   
  repeat++;
  
  

  if (repeat >= repeatTimes) {
    repeat = 0;
    time_index++;
    if (time_index >= sentences[video_index][1].length) {
      time_index = 0;
      video_index++;    
    }
    
  }

}

function moveBackwardTimeindex(){
  if (time_index>0){
     time_index--;
     repeat=0;
     myLoop();
  }
  else{
     time_index=0;
  }
}

function moveForwardTimeindex(){
   if (time_index<sentences[video_index][1].length){
      time_index++; 
      repeat=0; 
      myLoop();
   }
}

function jumpToVideo(vid_index){
//    alert (vid_index);
    
  let text = "Do you want to play this video?";
  if (confirm(text) == true) {
    video_index = vid_index;
    time_index = 0;
    repeat = 0;
    myLoop();
  } 

    
}

function listVideos(){
  var vid_index=0;
  for (const sentence of sentences) {
     
     const [video, timers,videoName] = sentence
     var videoLink="<a href='#' onclick='jumpToVideo("+vid_index+")' >" + videoName + "</a><br><br>";
     //alert (videoLink);
     document.getElementById("allVideos").innerHTML +=videoLink;
     vid_index++;
  }
  document.getElementById("allVideos").style.fontSize = "x-large";
  hideVideo();
}


function hideVideo() {
  document.getElementById("myVideo").style.visibility = "hidden";
}
function unhideVideo() {
  let passW = prompt("Please enter password", "");
  if (passW == "123456") {
     document.getElementById("myVideo").style.visibility = "visible";
  }
  
}

</script>
</head>
<body onload="listVideos()">

<table>
<tr>
<td>
<video id="myVideo" width="500" height="400" controls autoplay loop>

  Your browser does not support the video tag.
</video>

</td>
<td>

<div id="bodydesc" style="margin-left:auto; margin-right:auto; width:560px; height: 400px; overflow-y: scroll;">

    <p id="demo">

     

    </p>

</div>

</td>
  
</tr>
</table>


<br>

<table border=2>
<tr>
<td>
<a href="#" onclick="playAllVideos()" style="font-size: 30px; text-decoration: none" > Play All Videos</a>
</td>
<td>
<a href="#" onclick="pauseOrNot=true" style="font-size: 30px; text-decoration: none" > Pause = True </a>
</td>
<td>
<a href="#" onclick="pauseOrNot=false" style="font-size: 30px; text-decoration: none" > Pause = false </a>
</td>
<td>
<a href="#" onclick="moveForwardTimeindex()" style="font-size: 30px; text-decoration: none" > Move Forward Time Index </a>
</td>
<td>
<a href="#" onclick="moveBackwardTimeindex()" style="font-size: 30px; text-decoration: none" > Move Backward Time Index </a>
</td>


</tr>
<tr>


<td>
<a href="#" onclick="updateRepeatTimes(1)" style="font-size: 30px; text-decoration: none" > Repeat Once </a>
</td>

<td>
<a href="#" onclick="updateRepeatTimes(2)" style="font-size: 30px; text-decoration: none" > Repeat Twice </a>
</td>

<td>
<a href="#" onclick="updateRepeatTimes(3)" style="font-size: 30px; text-decoration: none" > Repeat 3 Times </a>
</td>

<td>
<a href="#" onclick="updateRepeatTimes(4)" style="font-size: 30px; text-decoration: none" > Repeat 4 Times </a>
</td>


<td>
<a href="#" onclick="updateRepeatTimes(5)" style="font-size: 30px; text-decoration: none" > Repeat 5 Times </a>
</td>

</tr>
</table>
<br>

<p id="allVideos"></p>

<br><br>

<a href="#" onclick="hideVideo()" style="font-size: 30px; text-decoration: none" >Hide</a>
<a href="#" onclick="unhideVideo()" style="font-size: 30px; text-decoration: none" >Unhide</a>

</body>
</html>