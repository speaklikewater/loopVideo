<html>
<head>

<script>
var sentences= 
[
 [//'journey27.mp4', 
 'https://onedrive.live.com/?cid=E883BE6AB4A33F70&id=E883BE6AB4A33F70%21109&parId=E883BE6AB4A33F70%21106&o=OneUp',
  [
    [1, 2],
    [5, 7]
  ]
 ],
 [//'journey28.mp4', 
 'https://onedrive.live.com/?cid=E883BE6AB4A33F70&id=E883BE6AB4A33F70%21108&parId=E883BE6AB4A33F70%21106&o=OneUp',
  [
    [10, 12],
    [13, 17],
    [25, 36]
  ]
 ],
 [//'journey29.mp4', 
 'https://onedrive.live.com/?cid=E883BE6AB4A33F70&id=E883BE6AB4A33F70%21107&parId=E883BE6AB4A33F70%21106&o=OneUp',
  [
    [13, 15],
    [15, 19],
    [21, 30]
  ]
 ]
];

let video_index = 0;
let time_index = 0;
let repeat = 0;

var video;
var maxTime;

document.addEventListener('DOMContentLoaded', () => {
  video = document.getElementById("myVideo");

  video.addEventListener("timeupdate", function(){
    if(video.currentTime >= maxTime){
      myLoop();
    }
  }, false);
});

function playVideo(myUrl, startTime, endTime) { 
  document.getElementById("demo").innerHTML +=myUrl + " start:"+startTime+" end: "+endTime+"<br>";
  
  //video.src = 'video/'+myUrl;
  video.src = myUrl;
  video.currentTime=startTime;
  video.play();
  maxTime = endTime;
} 


function myLoop(){
  if (!sentences[video_index]) {
    //video.src = null;
    //return;  
    video_index = 0;
    time_index = 0;
    repeat = 0;

  }
  playVideo(sentences[video_index][0], sentences[video_index][1][time_index][0], sentences[video_index][1][time_index][1]);
  repeat++;
  if (repeat >= 3) {
    repeat = 0;
    time_index++;
    if (time_index >= sentences[video_index][1].length) {
      time_index = 0;
      video_index++;
    }
  }

}

</script>
</head>
<body>


<video id="myVideo" width="500" height="400" controls autoplay loop>

  Your browser does not support the video tag.
</video>

<br>
<a href="#" onclick="myLoop()" > Play </a>

<br>
<p id="demo"></p>
</body>
</html>
